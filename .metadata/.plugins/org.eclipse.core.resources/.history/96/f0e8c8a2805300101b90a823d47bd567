package com.christan.webwrapper;

import java.io.File;
import java.io.IOException;

import org.xml.sax.SAXException;

import com.meterware.httpunit.*;
import com.meterware.servletunit.ServletRunner;
import com.meterware.servletunit.ServletUnitClient;

public class ServletRunnerWrapper {
	ServletRunner sr;
    ServletUnitClient client;
    File xmlFile;

    /*
    public ServletRunnerWrapper() throws IOException, SAXException {
    	init();
    }
    //*/
    
    public ServletRunnerWrapper(String xmlMappingsFile) throws IOException, SAXException {
    	init(xmlMappingsFile);
    }
     
    public void init(String xmlMappingsFile) throws IOException, SAXException {
    	//xmlFile = new File(xmlMappingsFile);
    	
    	WebConversation wc = new WebConversation();
        WebResponse   resp = wc.getResponse( "http://www.meterware.com/testpage.html" );

    	
    	/*
    	WebConversation wc = new WebConversation();
        WebRequest     req = new GetMethodWebRequest( "http://www.pingidentity.com/" );
        WebResponse   resp = wc.getResponse( req );

    	
    	/*
    	sr = new ServletRunner(  ); 
    	sr.registerServlet("PingServlet",  PingServlet.class.getName());
    	
    	client = sr.newClient();
    	WebConversation wc = new WebConversation();
        WebResponse   resp = wc.getResponse( "http://www.pingidentity.com/" );
/*
    	WebConversation     conversation = new WebConversation();
        WebResponse response = client.getResponse( request );
    	/*
    	 WebRequest request   = new PostMethodWebRequest( "http://test.meterware.com/myServlet" );
    	    request.setParameter( "color", "red" );
    	    WebResponse response = client.getResponse( request );
//*/
//    	client.getResponse( "http://www.pingidentity.com/" );
    }
    
    public void open(String url) throws IOException, SAXException {
	    //ServletRunner sr = new ServletRunner( "web.xml" );       // (1) use the web.xml file to define mappings
    	/*
    	xmlMappingsFile = new File()
	    sr = new ServletRunner();
	    client = sr.newClient();               // (2) create a client to invoke the application
	    
	/*
	    try {
	        client.getResponse( "http://localhost/PoolEditor" ); // (3) invoke the servlet w/o authorization
	        fail( "PoolEditor is not protected" );
	    } catch (AuthorizationRequiredException e) {             // (4) verify that access is denied
	    }
	
	    client.setAuthorization( "aUser", "pool-admin" );        // (5) specify authorization and
	    //*/
	    //client.getResponse( "http://www.pingidentity.com" );
    	//client.getResponse( url );
    }
}
