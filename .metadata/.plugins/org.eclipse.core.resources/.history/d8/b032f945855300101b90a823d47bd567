package com.christan.webwrapper;

import java.io.File;
import java.io.IOException;

import org.xml.sax.SAXException;

import com.meterware.httpunit.*;
import com.meterware.servletunit.ServletRunner;
import com.meterware.servletunit.ServletUnitClient;

public class ServletRunnerWrapper {
	WebConversation wc;
	WebResponse response;

    
    public ServletRunnerWrapper() throws IOException, SAXException {
    	init();
    }
    
    /*
    public ServletRunnerWrapper(String xmlMappingsFile) throws IOException, SAXException {
    	init(xmlMappingsFile);
    }*/
     
    public void init() throws IOException, SAXException {
    	HttpUnitOptions.setScriptingEnabled(true);
		HttpUnitOptions.setExceptionsThrownOnScriptError(false);
    	wc = new WebConversation();
    }
    
    public void open(String url) throws IOException, SAXException {
		
    	response = wc.getResponse( url ); 
        
    	
	    //ServletRunner sr = new ServletRunner( "web.xml" );       // (1) use the web.xml file to define mappings
    	/*
    	xmlMappingsFile = new File()
	    sr = new ServletRunner();
	    client = sr.newClient();               // (2) create a client to invoke the application
	    
	/*
	    try {
	        client.getResponse( "http://localhost/PoolEditor" ); // (3) invoke the servlet w/o authorization
	        fail( "PoolEditor is not protected" );
	    } catch (AuthorizationRequiredException e) {             // (4) verify that access is denied
	    }
	
	    client.setAuthorization( "aUser", "pool-admin" );        // (5) specify authorization and
	    //*/
	    //client.getResponse( "http://www.pingidentity.com" );
    	//client.getResponse( url );
    }
}
