package com.christan.pagetests;

import static org.junit.Assert.*;
import java.io.IOException;
import org.junit.*;
import org.xml.sax.SAXException;
import com.christan.parser.Parser;
import com.christan.webwrapper.HttpUnitBrowser;

public abstract class GenericPageTest {

	protected String url = null;
	protected HttpUnitBrowser browser;
	//GenericPageTest();
	
	protected void initialize(){
		browser = new HttpUnitBrowser();
	}

	
	@Test
	public void testTitle() throws IOException, SAXException {
		String filePrefix = "title_";
		String fileName, pageTitle;
		Parser p;
		browser.open(url);
		//System.out.println(browser.getCurrentPageUrl());
		//System.out.println(browser.getCurrentPageTitle());
		//System.out.println(url);
		p = new Parser(browser.getCurrentDomain());
		pageTitle = browser.getCurrentPageTitle();
		fileName = filePrefix + p.convertUrlToFileNameWithExtension(browser.getCurrentPagePath());
		if (!p.isFileAlreadyExists(fileName)) {
			p.writeToFile(fileName, pageTitle);
			fail("The file for storing a page title did not exist previously, creating it on this run.");
		}
		Assert.assertTrue("The page title of this page does not match the previous page title", p.getFileContents(fileName).equals(pageTitle));
		//System.out.println(p.getFileContents("meowmix.txt"));
		//System.out.println(browser.getCurrentDomain());
	}
	

}
